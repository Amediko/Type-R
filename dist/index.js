!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Nested=e():t.Nested=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=16)}([function(t,e,n){"use strict";var r=n(4);n.d(e,"l",function(){return r});var o=n(7);n.d(e,"d",function(){return o.a}),n.d(e,"e",function(){return o.b}),n.d(e,"f",function(){return o.c}),n.d(e,"g",function(){return o.d}),n.d(e,"i",function(){return o.e}),n.d(e,"j",function(){return o.f}),n.d(e,"k",function(){return o.g});var i=n(18);n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return i.b}),n.d(e,"c",function(){return i.c});var u=n(8);n.d(e,"h",function(){return u}),Object.extend=function(t,e){return o.a.extend(t,e)},Object.assign||(Object.assign=r.assign),Object.log=r.log},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return p}),n.d(e,"c",function(){return l});var r,o=n(0),i=n(19),u=n(9),s=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},a=(o.l.assign,o.h.trigger2,o.h.trigger3),c=o.h.on,f=o.h.off;!function(t){t[t.share=1]="share",t[t.listen=2]="listen",t[t.persistent=4]="persistent"}(r||(r={}));var p=function(){function t(t){this._events=void 0,this._changeToken={},this._transaction=!1,this._isDirty=null,this._owner=void 0,this._ownerKey=void 0,this._validationError=void 0,this.cid=this.cidPrefix+t}return e=t,t.onExtend=function(t){t.create===this.create&&(this.create=e.create)},t.create=function(t,e){return new this(t,e)},t.prototype.dispose=function(){this._disposed||(this._owner=void 0,this._ownerKey=void 0,this.off(),this.stopListening(),this._disposed=!0)},t.prototype.initialize=function(){},t.prototype.onChanges=function(t,e){c(this,this._changeEventName,t,e)},t.prototype.offChanges=function(t,e){f(this,this._changeEventName,t,e)},t.prototype.listenToChanges=function(t,e){this.listenTo(t,t._changeEventName,e)},t.prototype.transaction=function(t,e){void 0===e&&(e={});var n=l.begin(this);t.call(this,this),n&&l.commit(this)},t.prototype.updateEach=function(t,e){var n=l.begin(this);this.each(t),n&&l.commit(this)},t.prototype.set=function(t,e){if(t){var n=this._createTransaction(t,e);n&&n.commit()}return this},t.prototype.assignFrom=function(t){return this.set(t.__inner_state__||t,{merge:!0})},t.prototype.parse=function(t,e){return t},t.prototype.deepGet=function(t){return u.b(this,t,function(t,e){return t.get?t.get(e):t[e]})},t.prototype.getOwner=function(){return this._owner},t.prototype.getStore=function(){var t=this._owner;return t?t.getStore():this._defaultStore},t.prototype.map=function(t,e){var n=[],r=void 0!==e?function(n,r){return t.call(e,n,r)}:t;return this.each(function(t,e){var o=r(t,e);void 0!==o&&n.push(o)}),n},t.prototype.mapObject=function(t,e){var n={};return this.each(function(e,r){var o=t(e,r);void 0!==o&&(n[r]=o)}),n},Object.defineProperty(t.prototype,"validationError",{get:function(){var t=this._validationError||(this._validationError=new i.a(this));return t.length?t:null},enumerable:!0,configurable:!0}),t.prototype.validate=function(t){},t.prototype.getValidationError=function(t){var e=this.validationError;return(t?e&&e.nested[t]:e)||null},t.prototype.deepValidationError=function(t){return u.b(this,t,function(t,e){return t.getValidationError(e)})},t.prototype.eachValidationError=function(t){var e=this.validationError;e&&e.eachError(t,this)},t.prototype.isValid=function(t){return!this.getValidationError(t)},t.prototype.valueOf=function(){return this.cid},t.prototype.toString=function(){return this.cid},t.prototype.getClassName=function(){var t=this.constructor.name;if("Subclass"!==t)return t},t=e=s([o.f,o.j(o.c)],t);var e}(),l={begin:function(t){return!t._transaction&&(t._transaction=!0)},markAsDirty:function(t,e){var n=!e.silent;return n&&(t._isDirty=e),t._changeToken={},t._validationError=void 0,n},commit:function(t,e){var n=t._isDirty;if(n){for(;t._isDirty;){var r=t._isDirty;t._isDirty=null,a(t,t._changeEventName,t,r,e)}t._transaction=!1;var o=t._owner;o&&o!==e&&o._onChildrenChange(t,n)}else t._isDirty=null,t._transaction=!1},aquire:function(t,e,n){return e._owner?e._owner===t:(e._owner=t,e._ownerKey=n,!0)},free:function(t,e){t===e._owner&&(e._owner=void 0,e._ownerKey=void 0)}}},function(t,e,n){"use strict";function r(t){var e=t.defaults,n=t.attributes,r=t.idAttribute,o=n||e||{};return!r||r in o||(o[r]=void 0),o}var o=n(20),i=n(0),u=n(23),s=n(1),a=n(5);n.d(e,"a",function(){return a.a}),n.d(e,"b",function(){return a.b}),n.d(e,"c",function(){return a.c}),n.d(e,"e",function(){return a.e}),n.d(e,"f",function(){return a.f}),n.d(e,"g",function(){return a.g}),n.d(e,"h",function(){return a.h}),n.d(e,"i",function(){return a.i}),n.d(e,"k",function(){return a.j}),n.d(e,"l",function(){return a.k}),n.d(e,"m",function(){return a.l}),n.d(e,"n",function(){return a.m}),n.d(e,"o",function(){return a.n}),n.d(e,"p",function(){return a.o}),n.d(e,"q",function(){return a.p}),n.d(e,"r",function(){return a.q}),n.d(e,"s",function(){return a.r}),n.d(e,"j",function(){return o.a}),n.d(e,"d",function(){return a.d});var c=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),f=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},p=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},l=i.l.assign,h=i.l.defaults;i.l.omit,i.l.getBaseClass;o.a.onExtend=function(t){s.b.onExtend.call(this,t);var e=this,n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.model=e,n=f([i.k],n)}(t.Collection);this.DefaultCollection=n,e.Collection===t.Collection&&(this.Collection=n),a.n(this,a.j)},o.a.onDefine=function(t,e){var n=e.prototype,o=u.a(this.attributes=r(t),n._attributes),i=o.properties,a=o._localEvents,c=p(o,["properties","_localEvents"]);l(this.prototype,c),t.properties=h(t.properties||{},i),t._localEvents=a,s.b.onDefine.call(this,t,e),this.DefaultCollection.define(t.collection||{}),this.Collection=t.Collection,this.Collection.prototype.model=this},o.a._attribute=a.a,a.n(o.a,a.j)},function(t,e,n){"use strict";function r(t,e){return function(n,r,o){t.call(this,n,r,o),e.call(this,n,r,o)}}function o(t,e){return function(n,r){return e.call(this,t.call(this,n,r),r)}}function i(t,e){return function(n,r,o,i){return e.call(this,t.call(this,n,r,o,i),r,o,i)}}function u(t){return function(e,n,r){return n?t.call(this,e,n,r):"Required"}}n.d(e,"a",function(){return p});var s=n(12),a=n(0),c=a.l.notEqual,f=a.l.assign,p=function(){function t(t,e){this.name=t,this.getHook=null,this.options=e;var n=f({getHooks:[],transforms:[],changeHandlers:[]},e);n.getHooks=n.getHooks.slice(),n.transforms=n.transforms.slice(),n.changeHandlers=n.changeHandlers.slice();var s=n.value,a=n.type,c=n.parse,p=n.toJSON,l=n.changeEvents,h=n.validate,d=n.getHooks,v=n.transforms,y=n.changeHandlers;if(this.value=s,this.type=a,this.propagateChanges=!1!==l,this.parse=c,this.toJSON=void 0===p?this.toJSON:p,this.validate=h||this.validate,n.isRequired&&(this.validate=u(this.validate)),v.unshift(this.convert),this.get&&d.unshift(this.get),this.initialize.call(this,n),d.length){var g=this.getHook=d.reduce(o),_=this.validate;this.validate=function(t,e,n){return _.call(this,t,g.call(t,e,n),n)}}v.length&&(this.transform=v.reduce(i)),y.length&&(this.handleChange=y.reduce(r))}return t.create=function(e,n){var r=e.type;return new(e._attribute||(r?r._attribute:t))(n,e)},t.prototype.canBeUpdated=function(t,e,n){},t.prototype.transform=function(t,e,n,r){return t},t.prototype.convert=function(t,e,n,r){return t},t.prototype.isChanged=function(t,e){return c(t,e)},t.prototype.handleChange=function(t,e,n){},t.prototype.create=function(){return new this.type},t.prototype.clone=function(t,e){if(t&&"object"==typeof t){if(t.clone)return t.clone();var n=Object.getPrototypeOf(t);if(n===Object.prototype||n===Array.prototype)return JSON.parse(JSON.stringify(t))}return t},t.prototype.dispose=function(t,e){this.handleChange(void 0,e,t)},t.prototype.validate=function(t,e,n){},t.prototype.toJSON=function(t,e){return t&&t.toJSON?t.toJSON():t},t.prototype.createPropertyDescriptor=function(){var t=this,e=t.name,n=t.getHook;if("id"!==e)return{set:function(t){s.b(this,e,t)},get:n?function(){return n.call(this,this.attributes[e],e)}:function(){return this.attributes[e]}}},t.prototype.initialize=function(t,e){},t.prototype._log=function(t,e,n,r){a.l.log(t,"[Attribute Update Error] "+r.getClassName()+"."+this.name+": "+e,{Record:r,"Attribute definition":this,"Prev. value":r.attributes[this.name],"New value":n})},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function r(t){if(null===t)return!0;switch(typeof t){case"number":case"string":case"boolean":return!0;case"object":var e=Object.getPrototypeOf(t);if(e===Object.prototype||e===Array.prototype)return f(t,r)}return!1}function o(t){return Object.getPrototypeOf(t.prototype).constructor}function i(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var o=0,i=n;o<i.length;o++){var u=i[o],s=e[u];void 0===s||(t.prototype[u]=s)}}function u(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function s(t,e){for(var n,r=0;r<t.length;r++)if(n=e(t[r],r))return n}function a(t,e){var n;for(var r in t)if(t.hasOwnProperty(r)&&(n=e(t[r],r)))return n}function c(t,e){return Object.getPrototypeOf(t)===P?s(t,e):a(t,e)}function f(t,e){return!c(t,function(t){return!e(t)})}function p(t,e){for(var n,r=t;!n&&r;r=Object.getPrototypeOf(r))n=Object.getOwnPropertyDescriptor(r,e);return n}function l(t){for(var e={},n={},r=1;r<arguments.length;r++)n[arguments[r]]=!0;for(var o in t)!n.hasOwnProperty(o)&&t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function h(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){var o=n(e[r],r);void 0===o||(t[r]=o)}return t}function d(t,e){for(var n in e)t[n]=e[n];return t}function v(t,e){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t}function y(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);if(arguments.length>2)for(var r=2;r<arguments.length;r++){var o=arguments[r];o&&y(t,o)}return t}function g(t,e){for(var n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n]);if(arguments.length>2)for(var r=2;r<arguments.length;r++){var o=arguments[r];o&&g(t,o)}return t}function _(t){return t?Object.keys(t):[]}function b(t){var e,n=!0;return function(){return n&&(n=!1,e=t.apply(this,arguments),t=null),e}}function m(t,e){if(t===e)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n=Object.getPrototypeOf(t);if(n!==Object.getPrototypeOf(e))return!0;switch(n){case A:return+t!=+e;case P:return w(t,e);case C:case null:return O(t,e)}}return!0}function O(t,e){var n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(var r=0;r<n.length;r++){var o=n[r];if(!e.hasOwnProperty(o)||m(t[o],e[o]))return!0}return!1}function w(t,e){if(t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(m(t[n],e[n]))return!0;return!1}n.d(e,"log",function(){return E}),e.isValidJSON=r,e.getBaseClass=o,e.assignToClassProto=i,e.isEmpty=u,e.some=c,e.every=f,e.getPropertyDescriptor=p,e.omit=l,e.transform=h,e.fastAssign=d,e.fastDefaults=v,e.assign=y,e.defaults=g,e.keys=_,e.once=b,e.notEqual=m;var j={none:0,error:1,warn:2,info:3,log:4,debug:5},E=function(t,e,n){var r,o,i,u=j[t];if(void 0!==u||n?(r=e,i=t,o=n):(u=4,r=t,o=e,i="log"),u<=E.level){if(u<=E.throw||!E._console){var s=new Error(r);throw s.props=o,s}E._console(i,r,o),E.stop}};E.level=void 0!==typeof t&&t.env?1:2,E.throw=0,E.stop=0,"undefined"!=typeof console&&(E._console=function(t,e,n){var r=[e];for(var o in n)r.push("\n\t"+o+":",n[o]);console[t].apply(console,r)}),Object.log=E,Object.setPrototypeOf||(Object.setPrototypeOf=g);var P=Array.prototype,A=Date.prototype,C=Object.prototype}.call(e,n(17))},function(t,e,n){"use strict";function r(t,e){t.hasOwnProperty("shared")||Object.defineProperty(t,"shared",{get:function(){return new p.a({value:null,type:t,_attribute:e})}})}function o(t,e){return i.a.create(p.b(t),e)}e.n=r,e.m=o;var i=n(3);n.d(e,"b",function(){return i.a});var u=n(21);n.d(e,"a",function(){return u.a});var s=n(13);n.d(e,"e",function(){return s.a}),n.d(e,"g",function(){return s.b}),n.d(e,"k",function(){return s.c});var a=n(14);n.d(e,"c",function(){return a.a}),n.d(e,"f",function(){return a.b}),n.d(e,"h",function(){return a.c}),n.d(e,"i",function(){return a.d}),n.d(e,"o",function(){return a.e});var c=n(22);n.d(e,"j",function(){return c.a});var f=n(12);n.d(e,"l",function(){return f.a}),n.d(e,"p",function(){return f.b}),n.d(e,"q",function(){return f.c});var p=n(10);n.d(e,"d",function(){return p.a}),n.d(e,"r",function(){return p.b}),Object.defineProperties(Date,{microsoft:{get:function(){return new p.a({type:Date,_attribute:s.b})}},timestamp:{get:function(){return new p.a({type:Date,_attribute:s.c})}}}),Number.integer=function(t){return t?Math.round(t):0},Number.integer._attribute=a.c,"undefined"!=typeof window&&(window.Integer=Number.integer)},function(t,e,n){"use strict";function r(t){var e=t.models;return t.models=[],t._byId={},u(t,e),e}function o(t,e,n){var r,o=t.model;if(t._shared)r=e instanceof o?e:o.create(e,n),t._shared&l.a.listen&&y(r,r._changeEventName,t._onChildrenChange,t);else if(r=e instanceof o?n.merge?e.clone():e:o.create(e,n),!b(t,r)){var i=t._aggregationError||(t._aggregationError=[]);i.push(r)}var u=t._itemEvents;return u&&u.subscribe(t,r),r}function i(t,e,n){t._shared?t._shared&l.a.listen&&g(e,e._changeEventName,t._onChildrenChange,t):(m(t,e),n||e.dispose());var r=t._itemEvents;r&&r.unsubscribe(t,e)}function u(t,e){for(var n=0,r=e;n<r.length;n++){i(t,r[n])}return e}function s(t,e){var n=t._comparator;return!(!n||!1===e.sort)&&(t.models.sort(n),!0)}function a(t,e){t[e.cid]=e;var n=e.id;null!=n&&(t[n]=e)}function c(t,e){delete t[e.cid];var n=e.id;null!=n&&delete t[n]}function f(t,e){delete t[e.previous(e.idAttribute)];var n=e.id;null==n||(t[n]=e)}function p(t){t._log("error","added records already have an owner",t._aggregationError),t._aggregationError=void 0}e.d=r,e.c=o,e.e=i,e.f=u,e.i=s,e.b=a,e.h=c,e.j=f,n.d(e,"a",function(){return O}),e.g=p;var l=n(1),h=n(0),d=(h.h.EventMap,h.h.trigger2),v=h.h.trigger3,y=h.h.on,g=h.h.off,_=l.c.commit,b=(l.c.markAsDirty,l.c.aquire),m=l.c.free,O=function(){function t(t,e,n,r,o,i){this.object=t,this.isRoot=e,this.added=n,this.removed=r,this.nested=o,this.sorted=i}return t.prototype.commit=function(t){for(var e=this,n=e.nested,r=e.object,o=r._isDirty,i=0,u=n;i<u.length;i++){var s=u[i];s.commit(r)}r._aggregationError&&p(r);for(var a=0,c=n;a<c.length;a++){var s=c[a];d(r,"change",s.object,o)}for(var f=this,l=f.added,h=f.removed,y=0,g=l;y<g.length;y++){var b=g[y];v(b,"add",b,r,o),v(r,"add",b,r,o)}for(var m=0,O=h;m<O.length;m++){var b=O[m];v(b,"remove",b,r,o),v(r,"remove",b,r,o)}this.sorted&&d(r,"sort",r,o),(l.length||h.length)&&d(r,"update",r,o),this.isRoot&&_(r,t)},t}()},function(t,e,n){"use strict";function r(t){var e=c.getBaseClass(t);t.__super__=e.prototype,t.define||h.get(l).populate(t),h.get(t),t.onExtend&&t.onExtend(e)}function o(t){if("function"!=typeof t)return function(e){r(e),e.define(t)};r(t),t.define()}function i(t){return function(e){var n=h.get(e);n.definitionRules=c.defaults(t,n.definitionRules)}}function u(t,e){for(var n=d[typeof t],r=0,o=Object.getOwnPropertyNames(t);r<o.length;r++){var i=o[r];i in n||e(i)}}function s(t,e,n,r,o){t.hasOwnProperty(e)?t[e]=o?a(n.value,t[e],r):a(t[e],n.value,r):Object.defineProperty(t,e,n)}function a(t,e,n){return void 0===t?e:n&&void 0!==e?n(t,e):t}n.d(e,"a",function(){return l}),e.g=r,e.c=o,e.d=i,n.d(e,"b",function(){return h}),n.d(e,"f",function(){return v}),n.d(e,"e",function(){return y});var c=n(4),f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]]);return n},l=function(){function t(){}return t.define=function(t,e){void 0===t&&(t={});var n=c.getBaseClass(this);e&&c.assign(this,e);var r=t.mixins,o=p(t,["mixins"]);return r&&this.mixins.merge(r),this.mixins.mergeObject(this.prototype,o,!0),this.mixins.mergeObject(this.prototype,this.mixins.getStaticDefinitions(n),!0),this.onDefine&&this.onDefine(this.mixins.definitions,n),this.mixins.mergeInheritedMembers(n),this},t.extend=function(t,e){var n;return t&&t.hasOwnProperty("constructor")?(n=t.constructor,f(n,this)):n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e}(this),r(n),t&&n.define(t,e),n},t}(),h=function(){function t(t){this.Class=t,this.definitions={};var e=c.getBaseClass(t).mixins;this.mergeRules=e&&e.mergeRules||{},this.definitionRules=e&&e.definitionRules||{},this.appliedMixins=e&&e.appliedMixins||[]}return t.get=function(e){var n=e.mixins;return n&&e===n.Class?n:e.mixins=new t(e)},t.prototype.getStaticDefinitions=function(t){var e={},n=this.Class;return c.transform(e,this.definitionRules,function(e,r){if(t[r]!==n[r])return n[r]})},t.prototype.merge=function(t){for(var e=this.Class.prototype,n=(this.mergeRules,this.appliedMixins=this.appliedMixins.slice()),r=0,o=t;r<o.length;r++){var i=o[r];if(Array.isArray(i))this.merge(i);else if(n.indexOf(i)<0)if(n.push(i),"function"==typeof i){c.getBaseClass(i)!==Object&&console.log("Mixin error"),this.mergeObject(this.Class,i);var u=i.mixins;u&&(this.mergeRules=c.defaults({},this.mergeRules,u.mergeRules),this.definitionRules=c.defaults({},this.definitionRules,u.definitionRules),this.appliedMixins=this.appliedMixins.concat(u.appliedMixins)),this.mergeObject(e,i.prototype)}else this.mergeObject(e,i)}},t.prototype.populate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r++){var i=o[r];t.get(i).merge([this.Class])}},t.prototype.mergeObject=function(t,e,n){var r=this;u(e,function(o){var i,u=Object.getOwnPropertyDescriptor(e,o);(i=r.definitionRules[o])&&s(r.definitions,o,u,i,n),i&&i!==y.protoValue||s(t,o,u,r.mergeRules[o],n)})},t.prototype.mergeInheritedMembers=function(t){var e=this,n=e.mergeRules,r=e.Class;if(n){var o=r.prototype,i=t.prototype;for(var u in n){var s=n[u];o.hasOwnProperty(u)&&u in i&&(o[u]=a(o[u],i[u],s))}}},t}(),d={function:{length:!0,prototype:!0,name:!0,__super__:!0},object:{constructor:!0}},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return h.get(e).merge(t)}},y=function(t){return function(e){var n=h.get(e);n.mergeRules=c.defaults(t,n.mergeRules)}};y.value=function(t,e){return t},y.protoValue=function(t,e){return t},y.merge=function(t,e){return c.defaults({},t,e)},y.pipe=function(t,e){return function(n){return t.call(this,e.call(this,n))}},y.defaults=function(t,e){return function(){return c.defaults(t.apply(this,arguments),e.apply(this,arguments))}},y.classFirst=function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}},y.classLast=function(t,e){return function(){e.apply(this,arguments),t.apply(this,arguments)}},y.every=function(t,e){return function(){return t.apply(this,arguments)&&e.apply(this,arguments)}},y.some=function(t,e){return function(){return t.apply(this,arguments)||e.apply(this,arguments)}}},function(t,e,n){"use strict";function r(t){return m[t]||(m[t]=function(e,n,r,o,i){void 0===o&&void 0===i||y(this,t,e,n,r,o,i),void 0!==r?v(this,t,e,n,r):d(this,t,e,n)})}function o(t,e,n,r){for(var o,i,u=t[e],s=u;s;s=s.next)n&&n!==s.callback&&n!==s.callback._callback||r&&r!==s.context?(i=s,o||(o=s)):i&&(i.next=s.next);u!==o&&(t[e]=o)}function i(t,e,n){for(var r=t;r;r=r.next)r.callback.call(r.context,e,n)}function u(t,e,n,r){for(var o=t;o;o=o.next)o.callback.call(o.context,e,n,r)}function s(t,e,n,r,o){for(var i=t;i;i=i.next)i.callback.call(i.context,e,n,r,o)}function a(t,e,n,r,o,i){for(var u=t;u;u=u.next)u.callback.call(u.context,e,n,r,o,i)}function c(t,e,n,r,o,i,u){for(var s=t;s;s=s.next)s.callback.call(s.context,e,n,r,o,i,u)}function f(t,e,n,r){if(n){var o=t._events||(t._events=Object.create(null));o[e]=new O(n,r,o[e])}}function p(t,e,n,r){if(n){var o=g.once(function(){l(t,e,o),n.apply(this,arguments)});o._callback=n,f(t,e,o,r)}}function l(t,e,n,r){var i=t._events;if(i)if(n||r)if(e)o(i,e,n,r);else for(var u in i)o(i,u,n,r);else e?i[e]=void 0:t._events=void 0}function h(t,e,n,r,o){if(w.test(n))for(var i=n.split(w),u=0,s=i;u<s.length;u++){var a=s[u];t(e,a,r,o)}else t(e,n,r,o)}function d(t,e,n,r){var o=t._events;if(o){var s=o[e],a=o.all;i(s,n,r),u(a,e,n,r)}}function v(t,e,n,r,o){var i=t._events;if(i){var a=i[e],c=i.all;u(a,n,r,o),s(c,e,n,r,o)}}function y(t,e,n,r,o,i,u){var s=t._events;if(s){var f=s[e],p=s.all;a(f,n,r,o,i,u),c(p,e,n,r,o,i,u)}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"EventMap",function(){return _}),n.d(e,"EventDescriptor",function(){return b}),n.d(e,"EventHandler",function(){return O}),e.on=f,e.once=p,e.off=l,e.strings=h,e.trigger2=d,e.trigger3=v,e.trigger5=y;var g=n(4),_=function(){function t(e){this.handlers=[],e&&(e instanceof t?this.handlers=e.handlers.slice():e&&this.addEventsMap(e))}return t.prototype.merge=function(t){this.handlers=this.handlers.concat(t.handlers)},t.prototype.addEventsMap=function(t){for(var e in t)this.addEvent(e,t[e])},t.prototype.bubbleEvents=function(t){for(var e=0,n=t.split(w);e<n.length;e++){var o=n[e];this.addEvent(o,r(o))}},t.prototype.addEvent=function(t,e){for(var n=this.handlers,r=0,o=t.split(w);r<o.length;r++){var i=o[r];n.push(new b(i,e))}},t.prototype.subscribe=function(t,e){for(var n=0,r=this.handlers;n<r.length;n++){var o=r[n];f(e,o.name,o.callback,t)}},t.prototype.unsubscribe=function(t,e){for(var n=0,r=this.handlers;n<r.length;n++){var o=r[n];l(e,o.name,o.callback,t)}},t}(),b=function(){function t(t,e){this.name=t,this.callback=!0===e?r(t):"string"==typeof e?function(){var t=this[e];t&&t.apply(this,arguments)}:e}return t}(),m={},O=function(){function t(t,e,n){void 0===n&&(n=null),this.callback=t,this.context=e,this.next=n}return t}(),w=/\s+/},function(t,e,n){"use strict";function r(t,e,n){for(var r=e.match(o),i=r.length-1,u=t,s=0;s<i;s++){var a=r[s];switch(a){case"~":u=u.getStore();break;case"^":u=u.getOwner();break;default:u=u.get(a)}if(!u)return}return n(u,r[i])}n.d(e,"a",function(){return i}),e.b=r;var o=/\^|([^.]+)/g,i=function(){function t(t,e){void 0===e&&(e=!1);var n=t.match(o).map(function(t){return"^"===t?"getOwner()":"~"===t[0]?'getStore().get("'+t.substr(1)+'")':t});this.tail=e&&n.pop(),this.local=!n.length,n.unshift("self"),this.resolve=new Function("self","return "+n.join(".")+";")}return t}()},function(t,e,n){"use strict";function r(){}function o(t){var e;if("function"==typeof t)e=t.has;else if(t&&t instanceof c)e=t;else{var n=i(t);e=n&&n.prototype instanceof u.b?n.shared.value(t):new c({type:n,value:t})}return e.options}function i(t){switch(typeof t){case"number":return Number;case"string":return String;case"boolean":return Boolean;case"undefined":return;case"object":return t?t.constructor:void 0}}n.d(e,"a",function(){return c}),e.b=o;var u=n(1),s=n(0),a=s.l.assign,c=function(){function t(t){this.options={getHooks:[],transforms:[],changeHandlers:[]},t&&a(this.options,t)}return t.prototype.check=function(t,e){function n(n,r,o){if(!t.call(n,r,o)){var i=e||t.error||o+" is not valid";return"function"==typeof i?i.call(n,o):i}}var r=this.options.validate;return this.metadata({validate:r?function(t,e,o){return r(t,e,o)||n(t,e,o)}:n})},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.metadata({isRequired:!0})},enumerable:!0,configurable:!0}),t.prototype.watcher=function(t){return this.metadata({_onChange:t})},t.prototype.parse=function(t){return this.metadata({parse:t})},t.prototype.toJSON=function(t){return this.metadata({toJSON:"function"==typeof t?t:t?function(t){return t&&t.toJSON()}:r})},t.prototype.get=function(t){return this.metadata({getHooks:this.options.getHooks.concat(t)})},t.prototype.set=function(t){function e(e,n,r,o){if(this.isChanged(e,r)){var i=t.call(o,e,this.name);return void 0===i?r:this.convert(i,n,r,o)}return r}return this.metadata({transforms:this.options.transforms.concat(e)})},t.prototype.changeEvents=function(t){return this.metadata({changeEvents:t})},t.prototype.events=function(t){function e(t,e,r){e&&e.trigger&&n.unsubscribe(r,e),t&&t.trigger&&n.subscribe(r,t)}var n=new s.a(t);return this.metadata({changeHandlers:this.options.changeHandlers.concat(e)})},Object.defineProperty(t.prototype,"has",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.metadata=function(e){var n=new t(this.options);return a(n.options,e),n},t.prototype.value=function(t){return this.metadata({value:t})},t}();Function.prototype.value=function(t){return new c({type:this,value:t})},Object.defineProperty(Function.prototype,"isRequired",{get:function(){return this._isRequired||this.has.isRequired},set:function(t){this._isRequired=t}}),Object.defineProperty(Function.prototype,"has",{get:function(){return this._has||new c({type:this,value:this._attribute.defaultValue})},set:function(t){this._has=t}})},function(t,e,n){"use strict";function r(t,e,n){var r=n.parse?t.parse(e,n):e;return Array.isArray(r)?r:[r]}function o(t,e){return void 0!==e?function(n,r){return t.call(e,n,r)}:t}function i(t,e){return"object"==typeof t?function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0}:o(t,e)}n.d(e,"a",function(){return P});var u=n(0),s=n(1),a=n(2),c=n(6),f=n(24),p=n(25),l=n(26),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},v=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},y=u.h.trigger2,g=(u.h.on,u.h.off,s.c.begin),_=s.c.commit,b=s.c.markAsDirty,m=(u.l.omit,u.l.log,u.l.assign),O=u.l.defaults,w=(u.l.assignToClassProto,0),j=Array.prototype.slice,E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.defaultValue=[],e}(a.k),P=function(t){function e(e,n,o){void 0===n&&(n={});var i=t.call(this,w++)||this;if(i.models=[],i._byId={},i.comparator=i.comparator,void 0!==n.comparator&&(i.comparator=n.comparator,n.comparator=void 0),i.model=i.model,n.model&&(i.model=n.model,n.model=void 0),i.idAttribute=i.model.prototype.idAttribute,i._shared=o||0,e){var u=r(i,e,n);p.a(i,u,n,!0)}return i.initialize.apply(i,arguments),i._localEvents&&i._localEvents.subscribe(i,i),i}return h(e,t),e,e.prototype.createSubset=function(t,e){var n=this.constructor.subsetOf(this).options.type,r=new n(t,e);return r.resolve(this),r},e.onExtend=function(t){function e(t,e,r){n.call(this,t,e,s.a.share|(r?s.a.listen:0))}var n=this;this._SubsetOf=null,u.d.mixins.populate(e),e.prototype=this.prototype,e._attribute=E,this.Refs=this.Subset=e,s.b.onExtend.call(this,t),a.o(this,a.k)},e.onDefine=function(t,e){if(t.itemEvents){var n=new u.a(e.prototype._itemEvents);n.addEventsMap(t.itemEvents),this.prototype._itemEvents=n}t.comparator&&(this.prototype.comparator=t.comparator),s.b.onDefine.call(this,t)},Object.defineProperty(e.prototype,"__inner_state__",{get:function(){return this.models},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"comparator",{get:function(){return this._comparator},set:function(t){var e=this;switch(typeof t){case"string":this._comparator=function(e,n){var r=e[t],o=n[t];return r===o?0:r<o?-1:1};break;case"function":1===t.length?this._comparator=function(n,r){var o=t.call(e,n),i=t.call(e,r);return o===i?0:o<i?-1:1}:this._comparator=function(n,r){return t.call(e,n,r)};break;default:this._comparator=null}},enumerable:!0,configurable:!0}),e.prototype.getStore=function(){return this._store||(this._store=this._owner?this._owner.getStore():this._defaultStore)},e.prototype._onChildrenChange=function(t,e,n){if(void 0===e&&(e={}),n!==this){var r=this.idAttribute;t.hasChanged(r)&&c.j(this._byId,t);var o=g(this);b(this,e)&&y(this,"change",t,e),o&&_(this)}},e.prototype.get=function(t){if(null!=t){if("object"==typeof t){var e=t[this.idAttribute];return void 0!==e&&this._byId[e]||this._byId[t.cid]}return this._byId[t]}},e.prototype.each=function(t,e){for(var n=o(t,e),r=this.models,i=0;i<r.length;i++)n(r[i],i)},e.prototype.every=function(t,e){for(var n=i(t,e),r=this.models,o=0;o<r.length;o++)if(!n(r[o],o))return!1;return!0},e.prototype.filter=function(t,e){var n=i(t,e);this.models;return this.map(function(t,e){return n(t,e)?t:void 0})},e.prototype.some=function(t,e){for(var n=i(t,e),r=this.models,o=0;o<r.length;o++)if(n(r[o],o))return!0;return!1},e.prototype.map=function(t,e){for(var n=o(t,e),r=this.models,i=Array(r.length),u=0,s=0;s<r.length;s++){var a=n(r[s],s);void 0===a||(i[u++]=a)}return i.length=u,i},e.prototype._validateNested=function(t){if(this._shared)return 0;var e=0;return this.each(function(n){var r=n.validationError;r&&(t[n.cid]=r,e++)}),e},e.prototype.initialize=function(){},Object.defineProperty(e.prototype,"length",{get:function(){return this.models.length},enumerable:!0,configurable:!0}),e.prototype.first=function(){return this.models[0]},e.prototype.last=function(){return this.models[this.models.length-1]},e.prototype.at=function(t){var e=t<0?t+this.models.length:t;return this.models[e]},e.prototype.clone=function(t){void 0===t&&(t={});var e=this._shared&s.a.share?this.models:this.map(function(t){return t.clone()}),n=new this.constructor(e,{model:this.model,comparator:this.comparator},this._shared);return t.pinStore&&(n._defaultStore=this.getStore()),n},e.prototype.toJSON=function(){return this.models.map(function(t){return t.toJSON()})},e.prototype.set=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e={}),void 0!==e.add&&this._log("warn","Collection.set doesn't support 'add' option, behaving as if options.add === true.",e),e.reset)this.reset(t,e);else{var n=this._createTransaction(t,e);n&&n.commit()}return this},e.prototype.dispose=function(){if(!this._disposed){for(var e=!this._shared,n=0,r=this.models;n<r.length;n++){var o=r[n];c.e(this,o),e&&o.dispose()}t.prototype.dispose.call(this)}},e.prototype.reset=function(t,e){void 0===e&&(e={});var n=g(this),o=c.d(this);return t&&p.a(this,r(this,t,e),e,!0),b(this,e),e.silent||y(this,"reset",this,O({previousModels:o},e)),n&&_(this),this.models},e.prototype.add=function(t,e){void 0===e&&(e={});var n=r(this,t,e),o=this.models.length?f.a(this,n,e):p.a(this,n,e);if(o)return o.commit(),o.added},e.prototype.remove=function(t,e){return void 0===e&&(e={}),t?Array.isArray(t)?l.a(this,t,e):l.b(this,t,e):[]},e.prototype._createTransaction=function(t,e){void 0===e&&(e={});var n=r(this,t,e);return this.models.length?!1===e.remove?f.a(this,n,e,!0):p.b(this,n,e):p.a(this,n,e)},e.prototype.pluck=function(t){return this.models.map(function(e){return e[t]})},e.prototype.sort=function(t){if(void 0===t&&(t={}),c.i(this,t)){var e=g(this);b(this,t)&&y(this,"sort",this,t),e&&_(this)}return this},e.prototype.push=function(t,e){return this.add(t,m({at:this.length},e))},e.prototype.pop=function(t){var e=this.at(this.length-1);return this.remove(e,t),e},e.prototype.unset=function(t,e){var n=this.get(t);return this.remove(t,d({unset:!0},e)),n},e.prototype.unshift=function(t,e){return this.add(t,m({at:0},e))},e.prototype.shift=function(t){var e=this.at(0);return this.remove(e,t),e},e.prototype.slice=function(){return j.apply(this.models,arguments)},e.prototype.indexOf=function(t){var e=this.get(t);return this.models.indexOf(e)},e.prototype.modelId=function(t){return t[this.model.prototype.idAttribute]},e.prototype.toggle=function(t,e){var n=Boolean(this.get(t)),r=void 0===e?!n:Boolean(e);return n!==r&&(n?this.remove(t):this.add(t)),r},e.prototype._log=function(t,e,n){u.l.log[t]("[Collection Update] "+this.model.prototype.getClassName()+"."+this.getClassName()+": "+e,n,"Attributes spec:",this.model.prototype._attributes)},e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)||"Collection"},e._attribute=a.a,e=v([u.f({cidPrefix:"c",model:a.j,_changeEventName:"changes",_aggregationError:null}),u.g({comparator:u.i.value,model:u.i.protoValue,itemEvents:u.i.merge})],e)}(s.b);a.o(P,a.k),a.j.Collection=P},function(t,e,n){"use strict";function r(t,e,n){var r=o(t),u={},s=t.attributes,a=t._attributes[e],c=s[e],f=a.canBeUpdated(c,n,u);if(f){var p=c._createTransaction(f,u);p&&(p.commit(t),a.propagateChanges&&(i(t,u),h(t,"change:"+e,t,c,u)))}else{var d=a.transform(n,u,c,t);s[e]=d,a.isChanged(d,c)&&(a.handleChange(d,c,t),i(t,u),h(t,"change:"+e,t,d,u))}r&&l(t)}function o(t){return!!f(t)&&(t._previousAttributes=new t.Attributes(t.attributes),t._changedAttributes=null,!0)}function i(t,e){return t._changedAttributes&&(t._changedAttributes=null),p(t,e)}function u(t,e){return!(!e||e.constructor!==Object)||(t._log("warn","update with non-object is ignored!",e),!1)}function s(t,e,n){var r,o=t._attributes;if(u(t,e)){for(var i in e){var s=o[i];s?n(e[i],i,s):(r||(r=[]),r.push("'"+i+"'"))}r&&t._log("warn","Undefined attributes "+r.join(", ")+" are ignored!",e)}}e.b=r,n.d(e,"a",function(){return d}),e.c=u;var a=n(1),c=n(0),f=a.c.begin,p=a.c.markAsDirty,l=a.c.commit,h=c.h.trigger3,d={transaction:function(t,e){void 0===e&&(e={});var n=o(this);t.call(this,this),n&&l(this)},_onChildrenChange:function(t,e){var n=t._ownerKey,r=this._attributes[n];r&&!r.propagateChanges||this.forceAttributeChange(n,e)},forceAttributeChange:function(t,e){void 0===e&&(e={});var n=o(this);i(this,e)&&h(this,"change:"+t,this,this.attributes[t],e),n&&l(this)},_createTransaction:function(t,e){var n=this;void 0===e&&(e={});var r=o(this),u=[],a=[],c=this.attributes;if(s(this,e.parse?this.parse(t,e):t,function(t,r,o){var i,s=c[r];if(i=o.canBeUpdated(s,t,e)){var f=s._createTransaction(i,e);return void(f&&(a.push(f),o.propagateChanges&&u.push(r)))}var p=o.transform(t,e,s,n);c[r]=p,o.isChanged(p,s)&&(u.push(r),o.handleChange(p,s,n))}),u.length&&i(this,e))return new v(this,r,a,u);for(var f=0,p=a;f<p.length;f++){p[f].commit(this)}r&&l(this)}},v=function(){function t(t,e,n,r){this.object=t,this.isRoot=e,this.nested=n,this.changes=r}return t.prototype.commit=function(t){for(var e=this,n=e.nested,r=e.object,o=e.changes,i=0,u=n;i<u.length;i++){u[i].commit(r)}for(var s=r.attributes,a=r._isDirty,c=0,f=o;c<f.length;c++){var p=f[c];h(r,"change:"+p,r,s[p],a)}this.isRoot&&l(r,t)},t}()},function(t,e,n){"use strict";function r(t){return!isNaN(new Date(t).getTime())}function o(t){var e,n,r=0;if(n=l.exec(t)){for(var o,i=0;o=p[i];++i)n[o]=+n[o]||0;n[2]=(+n[2]||1)-1,n[3]=+n[3]||1,"Z"!==n[8]&&void 0!==n[9]&&(r=60*n[10]+n[11],"+"===n[9]&&(r=0-r)),e=Date.UTC(n[1],n[2],n[3],n[4],n[5]+r,n[6],n[7])}else e=Date.parse(t);return e}n.d(e,"a",function(){return s}),n.d(e,"b",function(){return c}),n.d(e,"c",function(){return f});var i=n(3),u=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=(Date.prototype,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.convert=function(t,e,n,r){if(null==t||t instanceof Date)return t;var o=new Date(t),i=o.getTime();return i!==i&&this._log("warn","assigned with Invalid Date",t,r),o},e.prototype.validate=function(t,e,n){if(null!=e){var r=e.getTime();if(r!==r)return n+" is Invalid Date"}},e.prototype.toJSON=function(t){return t&&t.toISOString()},e.prototype.isChanged=function(t,e){return(t&&t.getTime())!==(e&&e.getTime())},e.prototype.clone=function(t){return t&&new Date(t.getTime())},e.prototype.dispose=function(){},e}(i.a));Date._attribute=s;var a=/\/Date\(([0-9]+)\)\//,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.convert=function(t){if("string"==typeof t){var e=a.exec(t);if(e)return new Date(Number(e[1]))}return s.prototype.convert.apply(this,arguments)},e.prototype.toJSON=function(t){return t&&"/Date("+t.getTime()+")/"},e}(s),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.toJSON=function(t){return t.getTime()},e}(s);r("2011-11-29T15:52:30.5")&&r("2011-11-29T15:52:30.52")&&r("2011-11-29T15:52:18.867")&&r("2011-11-29T15:52:18.867Z")&&r("2011-11-29T15:52:18.867-03:30")||(s.prototype.convert=function(t){return null==t||t instanceof Date?t:new Date(o(t))});var p=[1,4,5,6,7,10,11],l=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/},function(t,e,n){"use strict";function r(){}n.d(e,"d",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return c}),e.e=r,n.d(e,"b",function(){return f});var o=n(3),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.convert=function(t){return null==t||t instanceof this.type?t:new this.type(t)},e.prototype.clone=function(t){return t&&t.clone?t.clone():this.convert(JSON.parse(JSON.stringify(t)))},e}(o.a);Function.prototype._attribute=u;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.dispose=function(){},e.prototype.create=function(){return this.type()},e.prototype.toJSON=function(t){return t},e.prototype.convert=function(t){return null==t?t:this.type(t)},e.prototype.isChanged=function(t,e){return t!==e},e.prototype.clone=function(t){return t},e}(o.a);Boolean._attribute=String._attribute=s;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.convert=function(t,e,n,r){var o=null==t?t:this.type(t);return o!==o&&this._log("warn","assigned with Invalid Number",t,r),o},e.prototype.validate=function(t,e,n){if(null!=e&&!isFinite(e))return n+" is not valid number"},e}(s);Number._attribute=a;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toJSON=function(t){return t},e.prototype.dispose=function(){},e.prototype.convert=function(t,e,n,r){return null==t||Array.isArray(t)?t:(this._log("warn","assigned with non-array",t,r),[])},e.prototype.clone=function(t){return t&&t.slice()},e}(o.a);Array._attribute=c;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toJSON=function(t){},e.prototype.create=function(){return r},e.prototype.convert=function(t,e,n,o){return null==t||"function"==typeof t?t:(this._log("warn","assigned with non-function",t,o),r)},e.prototype.isChanged=function(t,e){return t!==e},e.prototype.clone=function(t){return t},e}(o.a);Function._attribute=f},function(t,e,n){"use strict";function r(t){switch(typeof t){case"function":return function(e){return t.call(e)};case"object":return function(){return t};case"string":return new o.a(t).resolve}}e.a=r;var o=n(9)},function(t,e,n){"use strict";function r(t){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.attributes=t,n=h([f.f],n)}(c.j)}function o(t){return new c.d({value:t})}function i(t){return function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o;return this.transaction(function(){o=t.apply(e,n)}),o}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"on",function(){return d}),n.d(e,"off",function(){return v}),n.d(e,"trigger",function(){return y}),n.d(e,"once",function(){return g}),n.d(e,"listenTo",function(){return _}),n.d(e,"stopListening",function(){return b}),n.d(e,"listenToOnce",function(){return m}),e.attributes=r,e.value=o,e.transaction=i;var u=n(0);n.d(e,"tools",function(){return u.l}),n.d(e,"eventsApi",function(){return u.h}),n.d(e,"Mixable",function(){return u.d}),n.d(e,"predefine",function(){return u.k}),n.d(e,"define",function(){return u.f}),n.d(e,"definitions",function(){return u.g}),n.d(e,"MixinsState",function(){return u.e}),n.d(e,"mixins",function(){return u.j}),n.d(e,"mixinRules",function(){return u.i}),n.d(e,"EventMap",function(){return u.a}),n.d(e,"Messenger",function(){return u.c}),n.d(e,"Events",function(){return u.b});var s=n(11);n.d(e,"Collection",function(){return s.a});var a=n(27);n.d(e,"Store",function(){return a.a});var c=n(2);n.d(e,"Record",function(){return c.j}),n.d(e,"ChainableAttributeSpec",function(){return c.d}),n.d(e,"createSharedTypeSpec",function(){return c.o}),n.d(e,"createAttribute",function(){return c.n}),n.d(e,"AnyType",function(){return c.b}),n.d(e,"AggregatedType",function(){return c.a}),n.d(e,"DateType",function(){return c.e}),n.d(e,"MSDateType",function(){return c.g}),n.d(e,"TimestampType",function(){return c.l}),n.d(e,"PrimitiveType",function(){return c.i}),n.d(e,"NumericType",function(){return c.h}),n.d(e,"ArrayType",function(){return c.c}),n.d(e,"doNothing",function(){return c.p}),n.d(e,"FunctionType",function(){return c.f}),n.d(e,"SharedType",function(){return c.k}),n.d(e,"setAttribute",function(){return c.q}),n.d(e,"UpdateRecordMixin",function(){return c.m}),n.d(e,"shouldBeAnObject",function(){return c.r}),n.d(e,"toAttributeOptions",function(){return c.s});var f=n(0);n.d(e,"Model",function(){return c.j}),n.d(e,"Class",function(){return f.d});var p,l=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},d=(p=f.b,p.on),v=p.off,y=p.trigger,g=p.once,_=p.listenTo,b=p.stopListening,m=p.listenToOnce},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function u(){v&&h&&(v=!1,h.length?d=h.concat(d):y=-1,d.length&&s())}function s(){if(!v){var t=o(u);v=!0;for(var e=d.length;e;){for(h=d,d=[];++y<e;)h&&h[y].run();y=-1,e=d.length}h=null,v=!1,i(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var f,p,l=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var h,d=[],v=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||v||o(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=c,l.addListener=c,l.once=c,l.off=c,l.removeListener=c,l.removeAllListeners=c,l.emit=c,l.prependListener=c,l.prependOnceListener=c,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";function r(){return"l"+g++}function o(t){if(t)return"function"==typeof t?{get:t}:t}function i(t,e){(t._listeningTo||(t._listeningTo=Object.create(null)))[e.cid||(e.cid=r())]=e}n.d(e,"c",function(){return _}),n.d(e,"b",function(){return b});var u=n(7),s=n(4),a=n(8);n.d(e,"a",function(){return a.EventMap});var c=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},f=(a.EventHandler,a.strings),p=a.on,l=a.off,h=a.once,d=a.trigger5,v=a.trigger2,y=a.trigger3,g=0,_=function(){function t(){this._events=void 0,this._listeningTo=void 0,this.cid=r(),this.initialize.apply(this,arguments)}return t.onDefine=function(t){var e=t.localEvents,n=t._localEvents,r=t.properties;if(e||n){var i=new a.EventMap(this.prototype._localEvents);e&&i.addEventsMap(e),n&&i.merge(n),this.prototype._localEvents=i}r&&Object.defineProperties(this.prototype,s.transform({},r,o))},t.prototype.initialize=function(){},t.prototype.on=function(t,e,n){if("string"==typeof t)f(p,this,t,e,n);else for(var r in t)f(p,this,r,t[r],n||e);return this},t.prototype.once=function(t,e,n){if("string"==typeof t)f(h,this,t,e,n);else for(var r in t)f(h,this,r,t[r],n||e);return this},t.prototype.off=function(t,e,n){if(t)if("string"==typeof t)f(l,this,t,e,n);else for(var r in t)f(l,this,r,t[r],n||e);else l(this,void 0,e,n);return this},t.prototype.trigger=function(t,e,n,r,o,i){return void 0!==o||void 0!==i?d(this,t,e,n,r,o,i):void 0!==r?y(this,t,e,n,r):v(this,t,e,n),this},t.prototype.listenTo=function(t,e,n){return t&&(i(this,t),t.on(e,n||"object"!=typeof e?n:this,this)),this},t.prototype.listenToOnce=function(t,e,n){return t&&(i(this,t),t.once(e,n||"object"!=typeof e?n:this,this)),this},t.prototype.stopListening=function(t,e,n){var r=this._listeningTo;if(r){var o=!(e||n),i=n||"object"!=typeof e?n:this;if(t){var u=r[t.cid];u&&(o&&delete r[t.cid],u.off(e,i,this))}else if(null==t){for(var s in r)r[s].off(e,i,this);o&&(this._listeningTo=void 0)}}return this},t.prototype.dispose=function(){this._disposed||(this.stopListening(),this.off(),this._disposed=!0)},t=c([u.c,u.d({properties:u.e.merge,localEvents:u.e.merge})],t)}(),b=s.omit(_.prototype,"constructor","initialize")},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(t){this.length=t._validateNested(this.nested={}),(this.error=t.validate(t))&&this.length++}return t.prototype.each=function(t){var e=this,n=e.error,r=e.nested;n&&t(n,null);for(var o in r)t(r[o],o)},t.prototype.eachError=function(e,n){this.each(function(r,o){r instanceof t?r.eachError(e,n.get(o)):e(r,o,n)})},t}()},function(t,e,n){"use strict";function r(t,e){var n=new t.Attributes(e);return t.forEachAttr(n,function(e,r,o){n[r]=o.clone(e,t)}),n}n.d(e,"a",function(){return h});var o=n(0),i=n(1),u=n(5),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},c=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},f=o.l.assign,p=o.l.isEmpty,l=(o.l.log,0),h=function(t){function e(e,n){var o=t.call(this,l++)||this;o.attributes={};var i=n||{},u=(i.parse?o.parse(e,i):e)||{},s=i.clone?r(o,u):o.defaults(u);return o.forEachAttr(s,function(t,e,n){var r=s[e]=n.transform(t,i,void 0,o);n.handleChange(r,void 0,o)}),o.attributes=o._previousAttributes=s,o.initialize(e,n),o._localEvents&&o._localEvents.subscribe(o,o),o}return s(e,t),e,e.onDefine=function(t,e){},e.defaults=function(t){return this.extend({attributes:t})},e.attributes=function(t){return this.extend({attributes:t})},e.prototype.previousAttributes=function(){return new this.Attributes(this._previousAttributes)},Object.defineProperty(e.prototype,"__inner_state__",{get:function(){return this.attributes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changed",{get:function(){var t=this._changedAttributes;if(!t){var e=this._previousAttributes;t={};for(var n=this,r=n._attributes,o=n.attributes,i=0,u=this._keys;i<u.length;i++){var s=u[i],a=o[s];r[s].isChanged(a,e[s])&&(t[s]=a)}this._changedAttributes=t}return t},enumerable:!0,configurable:!0}),e.prototype.changedAttributes=function(t){if(!t)return!!this.hasChanged()&&f({},this.changed);var e,n=!1,r=this._transaction?this._previousAttributes:this.attributes,o=this._attributes;for(var i in t)o[i].isChanged(r[i],e=t[i])&&((n||(n={}))[i]=e);return n},e.prototype.hasChanged=function(t){var e=this._previousAttributes;return!!e&&(t?this._attributes[t].isChanged(this.attributes[t],e[t]):!p(this.changed))},e.prototype.previous=function(t){if(t){var e=this._previousAttributes;if(e)return e[t]}return null},e.prototype.isNew=function(){return null==this.id},e.prototype.has=function(t){return void 0!=this[t]},e.prototype.unset=function(t,e){var n=this[t];return this.set((r={},r[t]=void 0,r),e),n;var r},e.prototype.clear=function(t){var e=this,n=t&&t.nullify;return this.transaction(function(){e.forEachAttr(e.attributes,function(t,r){return e[r]=n?null:void 0})},t),this},e.prototype.getOwner=function(){var t=this._owner;return this._ownerKey?t:t&&t._owner},Object.defineProperty(e.prototype,"id",{get:function(){return this.attributes[this.idAttribute]},set:function(t){u.p(this,this.idAttribute,t)},enumerable:!0,configurable:!0}),e.prototype.forEachAttr=function(t,e){var n,r=this._attributes;for(var o in t){var i=r[o];i?e(t[o],o,i):(n||(n=[]),n.push("'"+o+"'"))}n&&this._log("warn","attributes "+n.join(", ")+" are not defined",{attributes:t})},e.prototype.each=function(t,e){for(var n=void 0!==e?function(n,r){return t.call(e,n,r)}:t,r=this.attributes,o=0,i=this._keys;o<i.length;o++){var u=i[o],s=r[u];void 0!==s&&n(s,u)}},e.prototype.keys=function(){for(var t=[],e=this.attributes,n=0,r=this._keys;n<r.length;n++){var o=r[n];void 0===e[o]||t.push(o)}return t},e.prototype.values=function(){return this.map(function(t){return t})},e.prototype._toJSON=function(){return{}},e.prototype._parse=function(t){return t},e.prototype.defaults=function(t){return{}},e.prototype._typeCheck=function(t){!t||(t.constructor,Object);var e=this._attributes,n=[];for(var r in t)e[r]||(n||(n=[]),n.push(r));return n},e.prototype.initialize=function(t,e){},e.prototype.clone=function(t){void 0===t&&(t={});var e=new this.constructor(this.attributes,{clone:!0});return t.pinStore&&(e._defaultStore=this.getStore()),e},e.prototype.deepClone=function(){return this.clone()},e.prototype._validateNested=function(t){var e=this,n=0;return this.forEachAttr(this.attributes,function(r,o,i){var u=i.validate(e,r,o);u&&(t[o]=u,n++)}),n},e.prototype.get=function(t){return this[t]},e.prototype.toJSON=function(){var t=this,e={};return this.forEachAttr(this.attributes,function(n,r,o){var i=o.toJSON;if(void 0!==n){var u=i.call(t,n,r);void 0!==u&&(e[r]=u)}}),e},e.prototype.parse=function(t,e){return this._parse(t)},e.prototype.deepSet=function(t,e,n){var r=this;return this.transaction(function(){for(var o=t.split("."),i=o.length-1,u=o[i],s=r,a=0;a<i;a++){var c=o[a],f=s.get?s.get(c):s[c];if(!f){var p=s._attributes;if(!p)return;var l=p[c].create();n&&n.nullify&&l._attributes&&l.clear(n),s[c]=f=l}s=f}s.set?s.set((h={},h[u]=e,h),n):s[u]=e;var h}),this},Object.defineProperty(e.prototype,"collection",{get:function(){return this._ownerKey?null:this._owner},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;this._disposed||(this.forEachAttr(this.attributes,function(t,n,r){r.dispose(e,t)}),t.prototype.dispose.call(this))},e.prototype._log=function(t,e,n){o.l.log(t,"[Record] "+e,a({Record:this,"Attributes definition:":this._attributes},n))},e.prototype.getClassName=function(){return t.prototype.getClassName.call(this)||"Record"},e.prototype._createTransaction=function(t,e){},e=c([o.f({cidPrefix:"m",_changeEventName:"change",idAttribute:"id",_keys:["id"]}),o.g({defaults:o.i.merge,attributes:o.i.merge,collection:o.i.merge,Collection:o.i.value,idAttribute:o.i.protoValue})],e)}(i.b);f(h.prototype,u.l);var d=function(){function t(t){this.id=t.id}return t}();h.prototype.Attributes=d,h.prototype._attributes={id:u.b.create({value:void 0},"id")},h.prototype.defaults=function(t){return void 0===t&&(t={}),{id:t.id}},h._attribute=u.a},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(3),o=n(1),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=o.c.free,s=o.c.aquire,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.clone=function(t){return t?t.clone():t},e.prototype.toJSON=function(t){return t&&t.toJSON()},e.prototype.canBeUpdated=function(t,e,n){if(t&&null!=e){if(!(e instanceof this.type))return e;if(n.merge)return e.__inner_state__}},e.prototype.convert=function(t,e,n,r){return null==t?t:t instanceof this.type?(!t._shared||t._shared&o.a.persistent||this._log("error","aggregated collection attribute is assigned with shared collection",t,r),e.merge?t.clone():t):this.type.create(t,e)},e.prototype.dispose=function(t,e){e&&this.handleChange(void 0,e,t)},e.prototype.validate=function(t,e){var n=e&&e.validationError;if(n)return n},e.prototype.create=function(){return this.type.create()},e.prototype.initialize=function(t){t.changeHandlers.unshift(this._handleChange)},e.prototype._handleChange=function(t,e,n){e&&(u(n,e),e.dispose()),t&&!s(n,t,this.name)&&this._log("error","aggregated attribute assigned with object already having an owner",t,n)},e}(r.a)},function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return h});var o=n(3),i=n(1),u=n(0),s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=u.h.on,c=u.h.off,f=i.c.free,p=i.c.aquire,l=i.a.listen|i.a.share,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.clone=function(t,e){if(!t||t._owner!==e)return t;var n=t.clone();return p(e,n,this.name),n},e.prototype.toJSON=function(){},e.prototype.canBeUpdated=function(t,e,n){if(t&&null!=e&&!(e instanceof this.type))return e},e.prototype.convert=function(t,e,n,r){if(null==t||t instanceof this.type)return t;var o=new this.type(t,e,l);return p(r,o,this.name),o},e.prototype.validate=function(t,e,n){},e.prototype.create=function(){return null},e.prototype._handleChange=function(t,e,n){e&&(e._owner===n?(f(n,e),e.dispose()):c(e,e._changeEventName,this._onChange,n)),t&&t._owner!==n&&a(t,t._changeEventName,this._onChange,n)},e.prototype.dispose=function(t,e){e&&this.handleChange(void 0,e,t)},e.prototype.initialize=function(t){var e=this;this._onChange=this.propagateChanges?function(t,n,r){this===r||this.forceAttributeChange(e.name,n)}:r,t.changeHandlers.unshift(this._handleChange)},e}(o.a)},function(t,e,n){"use strict";function r(t,e){var n=g({},t,l.m),r=v({},n,e),i=a(r),u={Attributes:i,_attributes:new i(r),properties:g({},n,function(t){return t.createPropertyDescriptor()}),defaults:c(r),_toJSON:p(r),_localEvents:o(n),_keys:Object.keys(r)},h=f(n,r);return h&&(u._parse=h),_.level||(u.forEachAttr=s(r)),u}function o(t){var e;for(var n in t){var r=t[n],o=r.options._onChange;o&&(e||(e=new b),e.addEvent("change:"+n,"string"==typeof o?u(o,n):i(o,n)))}return e}function i(t,e){return function(n,r){t.call(n,r,e)}}function u(t,e){var n=new d.a(t,!0),r=n.local,o=n.resolve,i=n.tail;return r?function(t,n){t[i](n,e)}:function(t,n){o(t)[i](n,e)}}function s(t){var e=["var v, _a=this._attributes;"];for(var n in t)e.push("( v = a."+n+' ) === void 0 || f( v, "'+n+'", _a.'+n+" );");return new Function("a","f",e.join(""))}function a(t){var e=[];for(var n in t)e.push("this."+n+" = x."+n+";");var r=new Function("x",e.join(""));return r.prototype=Object.prototype,r}function c(t){function e(t,e){n.push("this."+t+" = ( v = a."+t+" ) === void 0 ? "+e+" : v;"),r.push("this."+t+" = "+e+";")}var n=["var v;"],r=[];for(var o in t){var i=t[o],u=i.value,s=i.type;void 0===u&&s?e(o,"i."+o+".create()"):y(u)?e(o,JSON.stringify(u)):void 0===u?e(o,"void 0"):e(o,"i."+o+".value")}var a=new Function("i",r.join("")),c=new Function("a","i",n.join(""));return a.prototype=c.prototype=Object.prototype,function(t){return t?new c(t,this._attributes):new a(this._attributes)}}function f(t,e){var n=["var a=this._attributes;"],r=!1;for(var o in t){var i=e[o];if(i&&i.parse&&(r=!0),t[o].parse){var u="r."+o+" === void 0 ||( r."+o+" = a."+o+".parse.call( this, r."+o+', "'+o+'") );';n.push(u)}}if(r)return n.push("return r;"),new Function("r",n.join(""))}function p(t){var e=["var json = {},v=this.attributes,a=this._attributes;"];for(var n in t){t[n].toJSON&&e.push("json."+n+" = a."+n+".toJSON.call( this, v."+n+", '"+n+"' );")}return e.push("return json;"),new Function(e.join(""))}e.a=r;var l=n(5),h=n(0),d=n(9),v=h.l.defaults,y=h.l.isValidJSON,g=h.l.transform,_=h.l.log,b=h.h.EventMap},function(t,e,n){"use strict";function r(t,e,n,r){var i=c(t),s=[],l=u(t,e,s,n,r);if(l.length||s.length){var h=o(t,l,n);if(p(t,n))return new a.a(t,i,l,[],s,h);t._aggregationError&&a.g(t)}i&&f(t)}function o(t,e,n){var r=n.at;if(null!=r){var o=t.models.length-e.length;return r=Number(r),r<0&&(r+=o+1),r<0&&(r=0),r>o&&(r=o),i(t.models,r,e),!1}return a.i(t,n)}function i(t,e,n){for(var r=t.length-1,o=r-n.length;o>=e;o--,r--)t[r]=t[o];for(o=0,r=e;o<n.length;o++,r++)t[r]=n[o]}function u(t,e,n,r,o){for(var i=t._byId,u=t.models,s=(o||r.merge)&&!t._shared,c=(r.parse,t.model.prototype.idAttribute),f=u.length,p=0,l=e;p<l.length;p++){var h=l[p],d=h?i[h[c]]||i[h.cid]:null;if(d){if(s&&h!==d){var v=h.attributes||h,y=d._createTransaction(v,r);y&&n.push(y),d.hasChanged(c)&&a.j(i,d)}}else d=a.c(t,h,r),u.push(d),a.b(i,d)}return u.slice(f)}e.a=r;var s=n(1),a=n(6),c=s.c.begin,f=s.c.commit,p=s.c.markAsDirty},function(t,e,n){"use strict";function r(t,e,n,r){var o=f(t),i=s(t,e,n);if(i.length){var u=c.i(t,n);if(l(t,r?h:n))return new c.a(t,o,i.slice(),[],[],u);t._aggregationError&&c.g(t)}o&&p(t)}function o(t,e,n){var r=f(t),o=[],s=t.models,a=u(t,e,o,n),h=t.models.length-a.length,d=h<s.length?h?i(t,s):c.f(t,s):[],v=o.length||a.length,y=c.i(t,n)&&v||a.length||n.sorted;if(v||d.length||y){if(l(t,n))return new c.a(t,r,a,d,o,y);t._aggregationError&&c.g(t)}r&&p(t)}function i(t,e){for(var n=t._byId,r=[],o=0,i=e;o<i.length;o++){var u=i[o];n[u.cid]||(r.push(u),c.e(t,u))}return r}function u(t,e,n,r){for(var o=Array(e.length),i={},u=(null==r.merge||r.merge)&&!t._shared,s=t._byId,a=t.models,f=t.model.prototype.idAttribute,p=[],l=!0,h=0,d=0;h<e.length;h++){var v=e[h],y=null;if(v){var g=v[f],_=v.cid;if(i[g]||i[_])continue;y=s[g]||s[_]}if(y){if(u&&v!==y){l&&a[d]!==y&&(l=!1);var b=v.attributes||v,m=y._createTransaction(b,r);m&&n.push(m)}}else y=c.c(t,v,r),p.push(y);o[d++]=y,c.b(i,y)}return o.length=d,t.models=o,t._byId=i,l||(r.sorted=!0),p}function s(t,e,n){for(var r=e?e.length:0,o=Array(r),i={},u=t.model.prototype.idAttribute,s=0,a=0;s<r;s++){var f=e[s];if(!f||!i[f[u]]&&!i[f.cid]){var p=c.c(t,f,n);o[a++]=p,c.b(i,p)}}return o.length=a,t._byId=i,t.models=o}e.a=r,e.b=o;var a=n(1),c=n(6),f=a.c.begin,p=a.c.commit,l=a.c.markAsDirty,h={silent:!0}},function(t,e,n){"use strict";function r(t,e,n){var r=t.get(e);if(r){var o=h(t),i=t.models;i.splice(i.indexOf(r),1),s.h(t._byId,r);var u=l(t,n);return u&&(p(r,"remove",r,t,n),p(t,"remove",r,t,n)),s.e(t,r,n.unset),u&&f(t,"update",t,n),o&&d(t),r}}function o(t,e,n){var r=i(t,e);if(r.length){var o=h(t);if(u(t,r.length),l(t,n)){new s.a(t,o,[],r,[],!1).commit()}else o&&d(t)}return r}function i(t,e){for(var n=Array(e.length),r=t._byId,o=0,i=0;o<e.length;o++){var u=t.get(e[o]);u&&(n[i++]=u,s.h(r,u),s.e(t,u))}return n.length=i,n}function u(t,e){for(var n=t.models,r=t.models=Array(n.length-e),o=t._byId,i=0,u=0;i<n.length;i++){var s=n[i];o[s.cid]&&(r[u++]=s)}r.length=u}e.b=r,e.a=o;var s=n(6),a=n(0),c=n(1),f=a.h.trigger2,p=a.h.trigger3,l=c.c.markAsDirty,h=c.c.begin,d=c.c.commit},function(t,e,n){"use strict";var r=(n(28),n(29),n(30));n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";var r=n(2),o=n(15),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.toJSON=function(t){return t&&"object"==typeof t?t.id:t},e.prototype.clone=function(t){return t&&"object"==typeof t?t.id:t},e.prototype.isChanged=function(t,e){return(t&&(null==t.id?t:t.id))!==(e&&(null==e.id?e:e.id))},e.prototype.validate=function(t,e,n){},e}(r.b);r.j.from=function(t){var e=o.a(t);return new r.d({value:null,_attribute:u}).get(function(t,n){if("object"==typeof t)return t;var r=e(this),o=null;return r&&r.length&&(o=r.get(t)||null,this.attributes[n]=o,o&&this._attributes[n].handleChange(o,null,this)),o})}},function(t,e,n){"use strict";function r(t){var e={parse:!0};return t&&l(e,t),e}function o(t){return function(t){function e(e,n){var o=t.call(this,e,r(n),h)||this;return o.resolvedWith=null,o}return f(e,t),Object.defineProperty(e.prototype,"__inner_state__",{get:function(){return this.refs||this.models},enumerable:!0,configurable:!0}),e.prototype.add=function(e,n){return t.prototype.add.call(this,e,r(n))},e.prototype.reset=function(e,n){return t.prototype.reset.call(this,e,r(n))},e.prototype._createTransaction=function(e,n){return t.prototype._createTransaction.call(this,e,r(n))},e.prototype.toJSON=function(){return this.refs?this.refs.map(function(t){return t.id||t}):this.models.map(function(t){return t.id})},e.prototype._validateNested=function(){return 0},e.prototype.clone=function(t){var e=this.constructor,n=new e([],{model:this.model,comparator:this.comparator});return this.resolvedWith?(n.resolvedWith=this.resolvedWith,n.reset(this.models,{silent:!0})):n.refs=this.refs,n},e.prototype.parse=function(t){var e=this.resolvedWith,n=Array.isArray(t)?t:[t],r=[];if(e)for(var o=0,i=n;o<i.length;o++){var u=i[o],s=e.get(u);s&&r.push(s)}else n.length&&(this.refs=n);return r},e.prototype.resolve=function(t){return t&&t.length&&(this.resolvedWith=t,this.refs&&(this.reset(this.refs,{silent:!0}),this.refs=null)),this},e.prototype.getModelIds=function(){return this.toJSON()},e.prototype.toggle=function(e,n){return t.prototype.toggle.call(this,this.resolvedWith.get(e),n)},e.prototype.addAll=function(){return this.reset(this.resolvedWith.models)},e.prototype.toggleAll=function(){return this.length?this.reset():this.addAll()},e=p([u.f],e)}(t)}var i=n(11),u=n(0),s=n(15),a=n(2),c=n(1),f=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,u=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(u=(i<3?o(u):i>3?o(e,n,u):o(e,n))||u);return i>3&&u&&Object.defineProperty(e,n,u),u},l=u.l.fastDefaults;i.a.subsetOf=function(t){var e=this._SubsetOf||(this._SubsetOf=o(this)),n=s.a(t);return new a.d({type:e}).get(function(t){return!t||t.resolvedWith||t.resolve(n(this)),t})};var h=c.a.share|c.a.persistent},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(2),o=n(1),i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=null,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getStore=function(){return this},e.prototype.get=function(t){var e=this[t];return e||this===this._defaultStore?e:this._owner?this._owner.get(t):this._defaultStore.get(t)},Object.defineProperty(e,"global",{get:function(){return u},set:function(t){u&&u.dispose(),o.b.prototype._defaultStore=u=t},enumerable:!0,configurable:!0}),e}(r.j);s.global=new s}])});
//# sourceMappingURL=index.js.map